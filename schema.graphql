type Query {
  hello: String!
  viewer: User
  circuits: [Circuit!]!
}

input CreateCircuitInput {
  name: String!
  heroImage: String
}

type CreateCircuitPayload {
  circuit: Circuit!
}

input LapInput {
  lapNumber: Int!
  time: Float!
}

input CreateTrackSessionInput {
  date: String!
  format: String!
  circuitId: ID!
  notes: String
  laps: [LapInput!]
}

type CreateTrackSessionPayload {
  trackSession: TrackSession!
}

type Mutation {
  register(input: AuthInput!): AuthPayload!
  login(input: AuthInput!): AuthPayload!
  logout: LogoutResult!
  createCircuit(input: CreateCircuitInput!): CreateCircuitPayload!
  createTrackSession(input: CreateTrackSessionInput!): CreateTrackSessionPayload!
}

input AuthInput {
  username: String!
  password: String!
}

type User {
  id: ID!
  username: String!
  createdAt: String!
  recentCircuits(first: Int = 10): [Circuit!]!
  recentTrackSessions(first: Int = 10): [TrackSession!]!
}

type Circuit {
  id: ID!
  name: String!
  heroImage: String
}

type TrackSession {
  id: ID!
  date: String!
  format: String!
  circuit: Circuit!
  notes: String
  createdAt: String!
  updatedAt: String!
  laps(first: Int = 10): [Lap!]!
  trackRecordings(first: Int = 10): [TrackRecording!]!
}

type Lap {
  id: ID!
  session: TrackSession!
  lapNumber: Int!
  time: Float!
  createdAt: String!
  updatedAt: String!
  lapEvents(first: Int = 10): [LapEvent!]!
  personalBest: Float
}

type LapEvent {
  id: ID!
  lap: Lap!
  offset: Float!
  event: String!
  createdAt: String!
  updatedAt: String!
}

type TrackRecording {
  id: ID!
  session: TrackSession!
  mediaId: String!
  lapOneOffset: Float!
  description: String
  createdAt: String!
  updatedAt: String!
}

type AuthPayload {
  user: User!
  sessionExpiresAt: String!
}

type LogoutResult {
  success: Boolean!
}
